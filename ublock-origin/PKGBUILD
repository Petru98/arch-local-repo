pkgbase=ublock-origin
pkgname=(librewolf-$pkgbase chromium-$pkgbase)
pkgver=1.37.2
pkgrel=1
pkgdesc='Efficient blocker add-on for various browsers. Fast, potent, and lean'
arch=(any)
url='https://github.com/gorhill/uBlock'
license=(GPL3)
makedepends=(unzip)
source=(
    "https://github.com/gorhill/uBlock/releases/download/$pkgver/uBlock0_$pkgver.firefox.xpi"
    "https://github.com/gorhill/uBlock/releases/download/$pkgver/uBlock0_$pkgver.chromium.zip"
)
sha512sums=(
    ed702004e7eaa882364d6f0bc65e944525261dcdbd2c12a462c21a759c08db30bc76dac1d361be07b97d341b8a1e3d0fce86b9bc3de8edcf76e4680946fde15f
    37888d888e3e5f887a09979f1561c9e074f971a1a7d59d038ec0214d44b1ddf3f7bcf5b2bbc92dd2e154572065319c61a8e4df2adf8002c6c0c01fa73a4ef0d5
)
noextract=("uBlock0_$pkgver.firefox.xpi" "uBlock0_$pkgver.chromium.zip")

package_librewolf-ublock-origin() {
    groups=(librewolf-addons)
    install -Dm644 "uBlock0_$pkgver.firefox.xpi" "$pkgdir/usr/lib/librewolf/browser/extensions/uBlock0@raymondhill.net.xpi"
}

package_chromium-ublock-origin() {
    groups=(chromium-addons)
    install -dm755 "$pkgdir/usr/share/"
    unzip "uBlock0_$pkgver.chromium.zip" -d "$pkgdir/usr/share/"
    mv -T "$pkgdir/usr/share/uBlock0.chromium" "$pkgdir/usr/share/chromium-extension-$pkgbase"
}
