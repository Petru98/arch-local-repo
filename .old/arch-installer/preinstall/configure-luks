configure_luks() {
    if bool $LUKS ; then
        print_title "LUKS - https://wiki.archlinux.org/index.php/LUKS"
        print_warning "Do not use this for boot partitions."
        log ""
        local block_list=($(lsblk | grep 'part' | awk '{print "/dev/" substr($1,3)}'))
        PS3="Select partition (CTRL+D to skip): "
        LUKS=$False
        select INPUT in "${block_list[@]}"; do
            if array_contains_element "$INPUT" "${block_list[@]}"; then
                cryptsetup --cipher aes-xts-plain64 --key-size 512 --hash sha512 --iter-time 5000 --use-random --verify-passphrase luksFormat $INPUT
                cryptsetup open --type luks $(bool $TRIM && echo "--allow-discards") $INPUT crypt
                LUKS_DISK=$INPUT
                LUKS=$True
                break
            else
                invalid_option
            fi
        done
    fi
}

configure_luks
